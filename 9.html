// 2ë´‰ ì „: 7MA < 99MA ë§Œ ì²´í¬
// 1ë´‰ ì „: 7MA > 25MA && 7MA > 99MA (ê·¸ëŒ€ë¡œ ìœ ì§€)
function checkCrossCondition(closes) {
    if (!closes || closes.length < 100) {
        return null;
    }

    const ma7 = sma(closes, 7);
    const ma25 = sma(closes, 25);
    const ma99 = sma(closes, 99);

    const idx1 = closes.length - 2; // 1ë´‰ ì „ (ë§ˆê°ëœ ì§ì „ ë´‰)
    const idx2 = closes.length - 3; // 2ë´‰ ì „

    if (idx2 < 0 || idx1 < 0) return null;

    const ma7_1 = ma7[idx1];
    const ma25_1 = ma25[idx1];
    const ma99_1 = ma99[idx1];

    const ma7_2 = ma7[idx2];
    const ma25_2 = ma25[idx2];
    const ma99_2 = ma99[idx2];

    if (
        ![ma7_1, ma25_1, ma99_1, ma7_2, ma25_2, ma99_2].every(Number.isFinite)
    ) {
        return null;
    }

    // ðŸ”¹ 2ë´‰ ì „ ì¡°ê±´: 7MA < 99MA ë§Œ ì‚¬ìš© (25MAëŠ” ì¡°ê±´ì—ì„œ ì œì™¸)
    const cond2 = ma7_2 < ma99_2;

    // ðŸ”¹ 1ë´‰ ì „ ì¡°ê±´: ê·¸ëŒ€ë¡œ ìœ ì§€
    const cond1 =
        ma7_1 > ma25_1 &&
        ma7_1 > ma99_1;

    if (!(cond1 && cond2)) {
        return null;
    }

    return {
        idx1,
        idx2,
        ma7_1,
        ma25_1,
        ma99_1,
        ma7_2,
        ma25_2,
        ma99_2
    };
}
